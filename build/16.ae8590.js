(window.webpackJsonp=window.webpackJsonp||[]).push([[16,36,54,71],{102:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return B}));var o=r(0),n=r.n(o),i=r(589),a=r.n(i),c=r(245),s=r.n(c),l=r(570),d=r.n(l),u=r(76),f=r(247),g=r(263),p=r(78),w=r(94),m=r(577),y=r.n(m);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function v(e,t){return k(e)||O(e,t)||_(e,t)||E()}function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _(e,t){if(e){if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function O(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],o=!0,n=!1,i=void 0;try{for(var a=e[Symbol.iterator](),c;!(o=(c=a.next()).done)&&(r.push(c.value),!t||r.length!==t);o=!0);}catch(e){n=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(n)throw i}}return r}}function k(e){if(Array.isArray(e))return e}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function I(e,t,r){return t&&j(e.prototype,t),r&&j(e,r),e}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}function N(e,t){return(N=Object.setPrototypeOf||function e(t,r){return t.__proto__=r,t})(e,t)}function C(e){var t=M();return function r(){var o=P(e),n;if(t){var i=P(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return z(this,n)}}function z(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?H(e):t}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var A=c.Form.Item,D={labelCol:{fixedSpan:4},wrapperCol:{span:18}},B=function(e){S(r,e);var t=C(r);function r(e){var o;return T(this,r),(o=t.call(this,e)).field=new c.Field(H(o)),o}return I(r,[{key:"componentDidMount",value:function e(){var t=this;if(this.props.source){var r=this.props.source,o=r.name,n=r.template,i=r.owner,a=r.department,c=r.editor,s=r.logo;Promise.all([Object(u.getUserByEmpId)(i),Object(u.getMultiUserByEmpIds)(c)]).then((function(e){var r=v(e,2),l=r[0],d=r[1];t.field.setValues({name:o,template:n,owner:i,owner_info:[{empId:i,stageName:l.name}],department:a,editor:c,editor_info:d.map((function(e){var t=e.name,r;return{empId:e.empId,stageName:t}})),logo:s})}))}else{var d=window.user.empId;Object(u.getUserByEmpId)(d).then((function(e){t.field.setValues({theme_mapping:Object(g.themeKeyFilter)(l.themes.getTheme(p.THEME_LIST[0].value)),owner:d,owner_info:[{empId:d,stageName:e.name}],department:e.depDesc.split("-")[3]})}))}}},{key:"render",value:function e(){var t=this,r=this.props,o=r.source,i=r.onSubmit,s=r.onCancel,d=this.field,u=d.init,m=d.validate,y=d.setValues,b=d.getValues,v=d.getErrors,E=d.setErrors;return n.a.createElement(c.Form,{className:"theme-setting",size:"large",direction:"ver",field:this.field},n.a.createElement(A,h({label:"\u4e3b\u9898\u540d\u79f0"},D),n.a.createElement(c.Input,h({},u("name",{rules:{required:!0,message:"\u4e3b\u9898\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"},props:{onChange:function e(r){t.checkThemeNameTimeout&&clearTimeout(t.checkThemeNameTimeout),t.checkThemeNameTimeout=setTimeout((function(){f.default.fetch({api:"findTheme",data:{name:r}}).then((function(e){var t;e&&0===e.status&&Array.isArray(e.data)&&(e.data.filter((function(e){return e._id!==o._id})).length>0&&E({name:"\u540c\u540d\u4e3b\u9898\u5df2\u5b58\u5728\uff0c\u8bf7\u5c1d\u8bd5\u5176\u4ed6\u547d\u540d"}))}))}),500)}}}),{placeholder:"\u4e3b\u9898\u540d\u79f0"}))),!this.props.hideTemplate&&n.a.createElement(A,h({label:"\u6a21\u677f\u6765\u6e90"},D),this.props.source?n.a.createElement(c.Input,h({},u("template",{rules:{required:!0,message:"\u6a21\u677f\u6765\u6e90\u5fc5\u9009"}}),{disabled:!0})):n.a.createElement(w.ThemeSwitchControl,h({},u("template",{initValue:"".concat(p.THEME_LIST[0].label,"@widgets_v").concat(window.siteOptionMapping.aisc_widgets_lib_version),rules:{required:!0,message:"\u6a21\u677f\u6765\u6e90\u5fc5\u9009"},props:{onChange:function e(t,r){var o=r.label,n=(p.THEME_LIST.find((function(e){return e.label===o}))||{}).value;return y({theme_mapping:Object(g.themeKeyFilter)(l.themes.getTheme(n))}),t}}}),{data:p.THEME_LIST.map((function(e){var t=e.label,r=e.color,o=window.siteOptionMapping.aisc_widgets_lib_version,n;return{label:t,value:"".concat(t,"@widgets_v").concat(o),color:r}}))}))),n.a.createElement(A,h({label:"BU/\u56e2\u961f"},D),n.a.createElement(c.Input,h({},u("department",{rules:{required:!0,message:"BU/\u56e2\u961f\u4e0d\u80fd\u4e3a\u7a7a"}}),{placeholder:"BU/\u56e2\u961f"}))),n.a.createElement(A,h({label:"Owner"},D),n.a.createElement(a.a,h({},u("owner_info",{rules:{required:!0,message:"Owner \u4e0d\u80fd\u4e3a\u7a7a"},props:{onChange:function e(t){y({owner:(t[0]||{}).empId,owner_info:t})}}}),{needEmpId:!0,maxNum:1,className:"owner-picker"}))),n.a.createElement(A,h({label:"\u7f16\u8f91\u6743\u9650"},D),n.a.createElement(a.a,h({},u("editor_info",{props:{onChange:function e(t){y({editor:t.map((function(e){return e.empId})),editor_info:t})}}}),{needEmpId:!0,className:"editor-picker"}))),n.a.createElement(A,h({className:"theme-setting-footer",label:""},D),n.a.createElement(c.Button,{type:"primary",onClick:function e(){Object.values(v()).every((function(e){return null===e}))&&m(),Object.values(v()).every((function(e){return null===e}))&&i(b())}},"\u786e\u5b9a"),n.a.createElement(c.Button,{type:"normal",onClick:s},"\u53d6\u6d88")))}}]),r}(o.Component)},263:function(e,t,r){"use strict";r.r(t),r.d(t,"themeKeyFilter",(function(){return c})),r.d(t,"guiToTheme",(function(){return d})),r.d(t,"themeToGui",(function(){return u})),r.d(t,"getDiff",(function(){return f})),r.d(t,"convertColorScale",(function(){return g}));var o=r(570),n=r.n(o),i=r(264),a={"widgets-color-background":"#ffffff","widgets-color-layout-background":"#000000","widgets-color-blue":"#3f90ff","widgets-color-orange":"#fa8c15","widgets-color-red":"#e62412","widgets-color-green":"#15ad31","widgets-color-gray":"#e5e5e5",category_12:[],linear_10:[],order_10:[],"widgets-color-text-1":"#262626","widgets-color-text-2":"#595959","widgets-color-text-3":"#8c8c8c","widgets-color-disable":"#bfbfbf","widgets-font-family-txd-m-number":"'TXDDINMediumNumber', 'Helvetica Neue', 'Helvetica', 'PingFang SC', 'Microsoft YaHei', 'Arial', sans-serif","widgets-font-family-txd-r-number":"'TXDDINRegularNumber', 'Helvetica Neue', 'Helvetica', 'PingFang SC', 'Microsoft YaHei', 'Arial', sans-serif","widgets-font-size-1":"12px","widgets-font-size-2":"14px","widgets-font-size-3":"16px","widgets-font-size-4":"18px","widgets-font-size-5":"24px","widgets-font-size-6":"28px","widgets-font-size-7":"32px","widgets-legend-uncheck":"#bfbfbf","widgets-legend-text":"#262626","widgets-label-text":"#262626","widgets-tooltip-background":"#ffffff","widgets-tooltip-padding":"12px","widgets-tooltip-shadow":"0 1px 5px 0 rgba(0, 0, 0, 0.2)","widgets-tooltip-corner-radius":"4px","widgets-tooltip-cross-line":"#dddddd","widgets-tooltip-cross-react":"#ccd6ec","widgets-tooltip-cross-react-opacity":.3,"widgets-tooltip-title":"#8c8c8c","widgets-tooltip-text":"#262626","widgets-tooltip-marker-fill":"#ffffff","widgets-axis-label":"#8c8c8c","widgets-axis-line":"#e5e5e5","widgets-axis-grid":"#f7f7f7","widgets-guide-region-opacity":.1,"widgets-shape-area-opacity":.1,"widgets-shape-interval-opacity":1,"widgets-container-background":"#ffffff","widgets-container-padding":"20px","widgets-container-mobile-padding":"12px","widgets-container-corner-radius":"4px","widgets-container-shadow":"none","widgets-container-title":"#262626","widgets-container-split-line":"#e5e5e5","widgets-map-area-bg":"#e5e5e5","widgets-map-area-border":"#ffffff","widgets-map-label":"#595959","widgets-circle-stroke-background":"#f7f7f7","widgets-circle-stroke-width":"6px","widgets-sankey-edge":"#e5e5e5","widgets-sankey-node-text":"#8c8c8c","widgets-scrollbar-bg":"#ebecf0","widgets-scrollbar-thumb":"#c4c6cf"};function c(e){var t={};return Object.keys(e).forEach((function(r){a[r]&&(t[r]=e[r])})),t}var s=["widgets-font-size-1","widgets-font-size-2","widgets-font-size-3","widgets-font-size-4","widgets-font-size-5","widgets-font-size-6","widgets-font-size-7","widgets-tooltip-padding","widgets-tooltip-corner-radius","widgets-container-padding","widgets-container-corner-radius","widgets-circle-stroke-width"],l=["widgets-tooltip-cross-react-opacity","widgets-guide-region-opacity","widgets-shape-area-opacity","widgets-shape-interval-opacity"];function d(e){var t=Object.assign({},e);return s.forEach((function(e){isNaN(t[e])||(t[e]="".concat(t[e],"px"))})),l.forEach((function(e){isNaN(t[e])||(t[e]/=100)})),t.category_12=[t["widgets-color-category-1"],t["widgets-color-category-2"],t["widgets-color-category-3"],t["widgets-color-category-4"],t["widgets-color-category-5"],t["widgets-color-category-6"],t["widgets-color-category-7"],t["widgets-color-category-8"],t["widgets-color-category-9"],t["widgets-color-category-10"],t["widgets-color-category-11"],t["widgets-color-category-12"]],t.linear_10=[t["widgets-color-linear-1"],t["widgets-color-linear-5"],t["widgets-color-linear-9"],t["widgets-color-linear-3"],t["widgets-color-linear-7"],t["widgets-color-linear-10"],t["widgets-color-linear-2"],t["widgets-color-linear-4"],t["widgets-color-linear-6"],t["widgets-color-linear-8"]],t.order_10=[t["widgets-color-linear-1"],t["widgets-color-linear-2"],t["widgets-color-linear-3"],t["widgets-color-linear-4"],t["widgets-color-linear-5"],t["widgets-color-linear-6"],t["widgets-color-linear-7"],t["widgets-color-linear-8"],t["widgets-color-linear-9"],t["widgets-color-linear-10"]],t}function u(e){var t=Object.assign({},e);return s.forEach((function(e){"string"==typeof t[e]&&(t[e]=Number(t[e].replace("px","")))})),l.forEach((function(e){isNaN(t[e])||(t[e]*=100)})),t.category_12&&!t["widgets-color-category-1"]&&t.category_12.forEach((function(e,r){t["widgets-color-category-".concat(r+1)]=e})),t.order_10&&!t["widgets-color-linear-1"]&&t.order_10.forEach((function(e,r){t["widgets-color-linear-".concat(r+1)]=e})),t}function f(e,t){var r=[];return Object.keys(t).forEach((function(n){o.Util.isEqual(t[n],e[n])||r.push({key:n,oldVal:e[n],curVal:t[n]})})),r}function g(e){var t=e.rootValue,r=e.value,o=e.valuePath,n=Object.assign({},t);if("widgets-color-blue"===o[0]){for(var a=Object(i.default)(r,n["widgets-color-background"]),c=a.linear,s=a.category,l=0;l<10;l++)n["widgets-color-linear-".concat(l+1)]=c[9-l];for(var d=0;d<12;d++)n["widgets-color-category-".concat(d+1)]=s[d]}if("widgets-color-background"===o[0]){for(var u,f=Object(i.default)(n["widgets-color-blue"],r).linear,g=0;g<10;g++)n["widgets-color-linear-".concat(g+1)]=f[9-g];n["widgets-tooltip-background"]=r,n["widgets-tooltip-marker-fill"]=r,n["widgets-container-background"]=r,n["widgets-map-area-border"]=r}return n}},264:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return g}));var o=r(248),n=r.n(o),i=r(570),a=r.n(i),c=i.themes.category_12.slice(),s=c.map((function(e){return n()(e).toHsv()})),l=10,d=12,u=[10,340],f=(u[1]-u[0])/360;function g(e,t){for(var r=[],o,i=n()(e).toHsv(),a=i.h,l=i.s,d=i.v,u,f=n()(t).toHsv().v,g=f>.5,p=1;p<10;p++){var w=void 0;w=g?n()({h:a,s:Math.round(p*l*100/10),v:Math.round(100*(p*(d-f)/10+f))}).toHexString():n.a.mix(t,e,10*p).toHexString(),r.push(w)}r.push(e);var m=c.slice(),y=s.findIndex((function(e){return Math.abs(e.h-a)<30}));return m.splice(y,1),m.unshift(e),{linear:r,category:m}}},577:function(e,t,r){}}]);